<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Promise封装AJAX</title>
    </head>
    <body>
        <script>
            //接口地址：https://api.apiopen.top/getJoke
            const p = new Promise((resolve,reject)=>{
                //1.创建对象
                const xhr = new XMLHttpRequest();
                //2.初始化
                xhr.open("GET","https://api.apiopen.top/getJoke");
                //3.发送
                xhr.send();
                //4.绑定事件,处理响应结果
                xhr.onreadystatechange = function(){
                    if(xhr.readyState == 4){
                        if(xhr.status >= 200 && xhr.status < 300){
                            resolve(xhr.response);
                        }else{
                            //如果失败
                            reject(xhr.status);
                        }
                    }
                }
            })

            p.then(function(value){
                console.log(value);
            },function(reason){
                console.error(reason,"1");
            })
        </script>
    </body>
</html>