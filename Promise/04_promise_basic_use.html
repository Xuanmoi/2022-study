<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promise</title>
</head>
<body>
    <script>
        //what why how
        /**
         * Promise是什么？
         * 1.抽象表达:
         * Promise是JS中进行异步编程的新的解决方案（旧的是谁？纯回调的形式）
         * 2.具体表达：
         * （1）从语法上来说：Promise是一个构造函数
         * （2）从功能上来说：promise对象用来封装一个异步操作并可以获取其结果
         * 
         * promise的状态改变
         * 1.pending变为resolved
         * 2.pending变为rejected
         * 说明：只有这2种，且一个promise对象只能改变一次，无论变为成功还是失败，都会有一个结果数据
         *      成功的结果数据一般称为value，失败的结果数据一般称为reason
        */
        //1.创建一个新的promise对象
        const p=new Promise((resolve,reject)=>{//执行器函数 同步回调
            console.log("执行excutor");
            //2.执行异步操作任务
            setTimeout(()=>{
                const time=Date.now();//如果当前时间是偶数，就代表成功，否则代表失败
                if(time%2==0){
                    //3.1.如果成功了，调用resolve(value)
                    resolve("成功的数据，time:"+time);
                }else{
                    //3.2.如果失败了，调用reject（reason)
                    reject("失败的数据，time:"+time);
                }
                
            },1000)
            
        })
        console.log("new Promise()之后");
        p.then(
            value=>{
                //接收得到成功的value数据 onResolved
                console.log("成功的回调",value);
            },
            reason=>{
                //接收得到失败的reason数据 onRejected
                console.log("失败的回调",reason);
            }
        )
    </script>
</body>
</html>